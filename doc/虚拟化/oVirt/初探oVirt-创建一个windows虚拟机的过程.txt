日期：2015/10/19 - 2015/10/19 time 15:31
主机：n72, n73, n86, n93, vm220
目的：初探oVirt-windows虚拟机
操作内容：
一、基础环境
1、延续“初探oVirt-探索小结后再重构一次ovirt环境”
2、增加一个iso镜像到ISO域
[root@n86 11111111-1111-1111-1111-111111111111]# pwd
/data/ovirt/iso/a1373048-e959-4ec7-b1f3-97ad58299ae4/images/11111111-1111-1111-1111-111111111111
[root@n86 11111111-1111-1111-1111-111111111111]# wget https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso

来自：https://fedoraproject.org/wiki/Windows_Virtio_Drivers
ISO contents
The .iso contains the following bits:
NetKVM/: Virtio Network driver
viostor/: Virtio Block driver
vioscsi/: Virtio SCSI driver
viorng/: Virtio RNG driver
vioser/: Virtio serial driver
Balloon/: Virtio Memory Balloon driver
qxl/: QXL graphics driver for Windows 7 and earlier. (build virtio-win-0.1.103-1 and later)
qxldod/: QXL graphics driver for Windows 8 and later. (build virtio-win-0.1.103-2 and later)
pvpanic/: QEMU pvpanic device driver (build virtio-win-0.1.103-2 and later)
guest-agent/: QEMU Guest Agent 32bit and 64bit MSI installers
qemupciserial/: QEMU PCI serial device driver
*.vfd: VFD floppy images for using during install of Windows XP


我们使用virtio类型的硬盘可以选择：viostor


3、新建windows虚拟机，选项“运行一次”
【引导选项】
附加软盘：勾选
附加CD：选择windows镜像（此处选择的系统是：win7）
确定。

【使用 VirtIO 接口的磁盘】
加载 VirtIO 驱动
1）启动控制台，按照常规的步骤安装windows系统，到系统分区的窗口时，无法发现硬盘。
2）此时，需要切换到ovirt页面，更换CD为上一步下载的镜像（virtio-win.iso），再切回到控制台继续操作。
3）浏览目录，找到“viostor\w7\amd64\viostor.inf”，点击确定后可以识别到一块100G的硬盘。
4）选择硬盘，新建分区后，我们注意到出现一行提示：
“无法将windows安装到磁盘0 的分区 2”
5）这个时候，我们需要切换到ovirt页面再次更换CD为windows系统，再切回到控制台继续操作。
6）点击一下其他的分区，或者刷新一下，发现错误提示消失，可以继续操作。
7）剩下的步骤按照常规方式安装


【系统安装后的操作】
1、通过更换CD来安装其他的驱动
2、安装guest-agent








ZYXW、参考
1、How_to_create_a_Windows_7_Virtual_Machine
http://www.ovirt.org/How_to_create_a_Windows_7_Virtual_Machine




